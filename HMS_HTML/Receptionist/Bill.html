<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <script src="https://kit.fontawesome.com/cbb441a45f.js" crossorigin="anonymous"></script>

    <title>Medical Billing Invoice</title>

    <!-- Styles from code-1 -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;500&family=Roboto:wght@500;700;900&display=swap"
        rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css" rel="stylesheet">
    <link href="HMS_Lib/animate/animate.min.css" rel="stylesheet">
    <link href="HMS_Lib/owlcarousel/assets/owl.carousel.min.css" rel="stylesheet">
    <link href="HMS_Lib/tempusdominus/css/tempusdominus-bootstrap-4.min.css" rel="stylesheet" />
    <link href="D:\Billing_Page\Impact\assets\css\bootPfile.css" rel="stylesheet">
    <link href="D:\Billing_Page\Impact\assets\css\patient_profile.css" rel="stylesheet">
    <style>
        body {
            /* font-family: 'Heebo', sans-serif; */
            font-size: 12pt;
            margin: 0;
            padding: 0;
            background-size: cover;
            background-color: rgb(193, 220, 214);
            background-repeat: no-repeat;
            background-attachment: fixed;
        }

        .container {
            max-width: 800px;
            margin: 0 5 0 auto;
            /* Align to the right */
            padding: 30px;
            border: 2px solid #2D6CA8;
            background-color: #ffff;
            border-radius: 15px;
            position: relative;
        }

        /* Media query for responsiveness */
        @media (max-width: 768px) {
            .container {
                max-width: 100%;
                /* Adjust the container width for smaller screens */
                margin: 0 auto;
                /* Center the container horizontally for smaller screens */
                padding: 15px;
                /* Adjust padding for smaller screens */
            }
        }

        .bg-image {
            width: 50%;
            height: 40%;
            position: absolute;
            transform: translate(45%, 65%);
            opacity: 0.25;
        }

        h1 {
            font-size: 40px;
            text-align: center;

            color: rgb(17, 16, 16);
            padding: 5px;
            margin: 0;

        }

        .invoice-details {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }

        .patient-info,
        .physician-info {
            background: #2D6CA8;
            border: 1px solid #1e1b1b;
            padding: 10px;
            border-radius: 15px;
            width: 45%;
        }

        .button.save-button,
        .button.add-item-button {
            display: inline-block;
            justify-content: center;
            padding: 10px 20px;
            background-color: #2D6CA8;
            color: white;
            text-decoration: none;
            border: none;
            margin-top: 20px;
            border-radius: 5px;
            margin-right: 10px;
            /* Adjust spacing between buttons */
        }

        .button.save-button:hover,
        .button.add-item-button:hover {
            background-color: #2D6CA8;
        }

        .info-box {
            background: #ffffff;
            padding: 10px;
            border: 1px solid #1e1b1b;
            border-radius: 15px;
        }

        .info-box h2 {
            font-size: 15px;
            font-weight: bold;
            margin: 0;
            color: #2D6CA8;
        }

        .table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        .table th,
        .table td {
            border: 1px solid #2D6CA8;
            padding: 8px;
            text-align: left;
        }

        .table th {
            background-color: #2D6CA8;
            color: white;
            font-size: 17px;
        }

        /* Style for the Delete Last Row button */
        .delete-row-button {
            /* Copy styles from the button class */
            display: inline-block;
            justify-content: center;
            padding: 10px 20px;
            background-color: #2D6CA8;
            color: white;
            text-decoration: none;
            border: none;
            margin-top: 20px;
            border-radius: 5px;
            margin-right: 10px;
        }

        /* Hover effect for the Delete Last Row button */
        .delete-row-button:hover {
            background-color: #2D6CA8;
        }


        .button.print-button {
            display: inline-block;
            justify-content: center;
            padding: 10px 20px;
            background-color: #2D6CA8;
            color: white;
            text-decoration: none;
            border: none;
            margin-top: 20px;
            border-radius: 5px;
        }

        .button:hover {
            background-color: #2D6CA8;
        }

        .footer {
            text-align: center;
            background-color: #2D6CA8;
            color: white;
            padding: 40px;
            margin-top: 20px;
            border-radius: 0 0 15px 15px;
        }

        .invoice-table {
            margin-top: 20px;
        }

        .invoice-table th {
            background-color: #2D6CA8;
            color: white;
            font-size: 17px;
        }

        table.invoice-table {
            margin: 0;
            margin-top: 20px;
            width: 100%;
            border-collapse: collapse;
        }

        table.invoice-table thead {
            background-color: #bbccd1;
        }

        table.invoice-table th {
            padding: 10px;
            text-align: left;
            font-size: 17px;
            font-weight: 600;
            border-bottom: 2px solid #4f85b3;
        }

        table.invoice-table td {
            padding: 10px;
            text-align: left;
            font-size: 14px;
            border-bottom: 1px solid #ddd;
        }

        table.invoice-table thead tr th:first-child {
            width: 25%;
        }

        table.invoice-table thead tr th:nth-child(2) {
            width: 25%;
        }

        table.invoice-table thead tr th:nth-child(3) {
            width: 25%;
        }

        table.invoice-table thead tr th:nth-child(4) {
            width: 25%;
        }

        table.invoice-table tbody tr:hover {
            background-color: #f9f9f9;
        }

        table.invoice-table,
        table.invoice-table th,
        table.invoice-table td {
            font-family: 'Heebo', sans-serif;
        }
    </style>
</head>

<body>
    <!-- Navbar Start -->
    <nav class="navbar navbar-expand-lg bg-primary navbar-light fixed-top p-0" data-wow-delay="0.1s">
        <a href="HMS_HTML/hms_index.html" class="navbar-brand d-flex align-items-center px-4 px-lg-5">
            <h1 class="m-0 text-white"><i class="far fa-hospital me-3"></i>Care4You</h1>
        </a>
        <button type="button" class="navbar-toggler me-4" data-bs-toggle="collapse" data-bs-target="#navbarCollapse">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarCollapse">
            <div class="navbar-nav ms-auto p-4 p-lg-0">
                <a href="HMS_HTML/hms_index.html" class="nav-item nav-link">Home</a>
                <a href="HMS_HTML/about.html" class="nav-item nav-link">About Us</a>
                <a href="HMS_HTML/service.html" class="nav-item nav-link">Services</a>
                <a href="HMS_HTML/contact.html" class="nav-item nav-link">Contact Us</a>
                <a href="#" class="nav-item nav-link">Profile</a>
                <a href="HMS_HTML/hms_index.html" class="nav-item nav-link">Log Out</a>
            </div>
        </div>
    </nav>
    <!-- Navbar End -->

    <!-- Side-bar Start -->
    <div class="container-fluid side-bar">
        <div class="side-bar-top ">
            <div class="side-bar-heading">
                <p><b>Receptionist</b></p>
            </div>
            <div
                class="side-bar-icon d-inline-flex align-items-center justify-content-center bg-white rounded-circle mb-4">
                <i class="fa fa-user-plus fa-3x"></i>
            </div>
            <p class="side-bar-top-info"><b>Name :</b> FName LName</p>
            <p class="side-bar-top-info"><b>Id :</b> E101</p>
        </div>
        <div class="side-bar-bottom">
            <ul>
                <li><a href="patient_home.html">Dashboard</a></li>
                <li><a href="patient_appointment.html">Schedule Appointment</a></li>
                <li><a href="view_appointment.html">Generate Bill</a></li>
                <li><a href="view_prescription.html">Apply for leave</a></li>
                <li><a href="#">Logout</a></li>
            </ul>
        </div>
    </div>
    <!-- Side-bar End -->

    <div class="container">
        <!-- <img src="https://www.seniormotif.com/wp-content/uploads/2013/11/Medical-symbol.jpg" class="bg-image" alt=""> -->
        <h1>MEDICAL BILLING INVOICE</h1>
        <div class="invoice-details">
            <div class="patient-info">
                <div class="info-box">
                    <h2>Patient Information</h2>
                    <p>Kemba Harris</p>
                    <p>(555) 595-5999</p>
                    <p>11 Rosewood Drive,</p>
                    <p>Collingwood, NY 33580</p>
                </div>
            </div>
            <div class="physician-info">
                <div class="info-box">
                    <h2>Physician Information</h2>
                    <p>Dr. Alanah Gomez</p>
                    <p>(555) 505-5000</p>
                    <p>102 Trope Street,</p>
                    <p>New York, NY 45568</p>
                </div>
            </div>
        </div>
        <table class="invoice-table">
            <thead>
                <tr>
                    <th>Invoice Number</th>
                    <th>Patient ID</th>
                    <th>Date</th>
                    <th>Total Amount</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>12245</td>
                    <td id="patient-id-display"></td> <!-- Add Patient ID here -->
                    <td id="current-date"> <!-- The date will be set here -->
                    </td>
                    <td id="grand_total"></td>
                </tr>
            </tbody>
        </table>

        <!-- ... (Previous HTML code) ... -->

        <table class="table" id="billing-table">
            <thead>
                <tr>
                    <th>Item</th>
                    <th>Description</th>
                    <th>Amount</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td contenteditable="true">New Item</td>
                    <td contenteditable="true">Description</td>
                    <td contenteditable="true">$0.00</td>
                </tr>
                <!-- Additional rows will be added dynamically -->
            </tbody>
        </table>

        <div class="attributes">
            <div class="attribute">
                <span>Total-Amount</span>
                <span id="total-amount"></span>
            </div>
        </div>
        <br><br><br><br>
        <a class="button print-button" href="#" onclick="printInvoice()">Print</a>
        <button class="button save-button" onclick="saveChanges()">Save</button>
        <button class="button add-item-button" onclick="addNewItem()">Add New Item</button>
        <button class="button print-button delete-row-button" onclick="deleteLastRow()">Delete Last Row</button>



        <script>

            function addNewItem() {
                const tableBody = document.querySelector('#billing-table tbody');

                // Create a new row and its cells
                const newRow = document.createElement('tr');
                newRow.innerHTML = `
        <td contenteditable="true">New Item</td>
        <td contenteditable="true">Description</td>
        <td contenteditable="true">$0.00</td>
    `;

                // Append the new row to the table
                tableBody.appendChild(newRow);
            }

            // Function to calculate the total amount including tax



            // Function to remove the "New Item Added" button from the new row
            function removeNewItem(button) {
                const row = button.parentNode.parentNode;
                row.removeChild(button.parentNode);
            }

            // Function to calculate the Total Amount in the invoice table
            function calculateTotalAmount() {
                // Get all the rows in the billing table body
                const rows = document.querySelectorAll('#billing-table tbody tr');

                // Initialize total amount
                let totalAmount = 0;

                // Iterate through each row
                rows.forEach(row => {
                    // Get the amount from the third column of the row
                    const amount = parseFloat(row.cells[2].textContent.replace('$', '').trim()) || 0;

                    // Add the amount to the total
                    totalAmount += amount;
                });

                // Display the total amount in the Total Amount span
                document.getElementById('total-amount').textContent = `$${totalAmount.toFixed(2)}`;
            }


            window.onload = function () {
                calculateTotalAmount();
            };
            function calculateTotalWithTax() {
                const amountText = document.getElementById('total-amount').textContent.trim().replace('$', '');
                const amount = parseFloat(amountText) || 0;
                const taxRateText = document.getElementById('tax-rate').textContent.trim().replace('%', '');
                const taxRate = parseFloat(taxRateText) || 0;

                const taxAmount = (amount * taxRate) / 100;
                const totalAmount = amount + taxAmount;

                document.getElementById('grand_total').textContent = `$${totalAmount.toFixed(2)}`;
            }

            // Call the function to calculate total amount with tax when the window loads
            window.onload = function () {
                calculateTotalWithTax();
                // Other functions or setups you might have on window load
            };

            // Call the calculateTotalAmount function when the page loads


            // Listen for changes in the table and recalculate the total amount
            document.getElementById('billing-table').addEventListener('input', calculateTotalAmount);

            function saveChanges() {
                const rows = document.querySelectorAll('#billing-table tbody tr');

                rows.forEach(row => {
                    const description = row.cells[1].textContent.trim(); // Get the description from the second cell
                    const amount = row.cells[2].textContent.trim(); // Get the amount from the third cell
                    // Save the description and amount values as needed
                    console.log(`Description: ${description}, Amount: ${amount}`);
                });

                // Add functionality to save changes here
                alert("Details saved!"); // Display an alert confirming that details are saved
            }


            // Function to print the invoice
            function printInvoice() {
                // Hide the print button when printing
                const printButton = document.querySelector('.print-button');
                if (printButton) {
                    printButton.style.display = 'none';
                }

                // Print the invoice
                window.print();

                // Show the print button after printing
                if (printButton) {
                    printButton.style.display = 'block';
                }
            }

            // Function to extract the patient ID from the URL query parameter
            function getPatientIdFromUrl() {
                const urlParams = new URLSearchParams(window.location.search);
                return urlParams.get("patientId");
            }

            // Get the patient ID and display it in an element with a specific ID (e.g., "patient-id-display")
            const patientId = getPatientIdFromUrl();
            if (patientId) {
                document.getElementById("patient-id-display").textContent = patientId;
            }




            // Function to set the current date
            function setCurrentDate() {
                const currentDate = new Date();
                const currentDateString = currentDate.toLocaleDateString();
                document.getElementById('current-date').textContent = currentDateString;
            }

            // Call setCurrentDate function when the page loads
            window.onload = function () {
                setCurrentDate();
            };
            function deleteLastRow() {
                const tableBody = document.querySelector('#billing-table tbody');
                const rows = tableBody.querySelectorAll('tr');

                // Check if there's any row to delete
                if (rows.length > 1) { // Ensure there's at least one initial row that shouldn't be deleted
                    tableBody.removeChild(rows[rows.length - 1]); // Remove the last row
                    calculateTotalAmount(); // Recalculate total amount after deletion
                } else {
                    alert("Can't delete the last row!"); // Alert if trying to delete the last row when there's only one row
                }
            }

        </script>
</body>

</html>
